<html>

<head>

<title>Adam Mark - Clustering markers on a warehouse map</title>

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"/>
<meta name="title" content="Adam Mark - Clustering markers on a warehouse map"/>

<link href="../main.css?1692290986647" rel="stylesheet">

</head>

<body>

<main>

<a href="../">Adam Mark</a>

<h1>Clustering markers on a warehouse map</h1>

<section>
<h3>Background</h3>

<p>From 2020 to 2023, I developed dashboards and mapping tools for a warehouse automation system using TypeScript, React and SVG.</p>
</section>

<section>
<h3>Problem</h3>

<p>Our custom mapping system supported the arbitrary placement of "markers." Sometimes these markers would overlap, obscuring their values, as shown below. <i>Our map developers needed a way to eliminate this clutter.</i></p>

<p><img src="https://user-images.githubusercontent.com/28193/214857037-b0d11683-4458-4440-8edd-2691b927aa4d.png" width="100%"/></p>

</section>

<section>
<h3>Solution</h3>

<p>I created a simple clustering function that takes a set of <i>inputs</i> and returns a smaller set of <i>outputs</i>:</p>

<p><img src="https://user-images.githubusercontent.com/28193/214858499-f3bda57d-5dbb-4b3e-a6a7-16e88c4db2d4.png" width="100%"/></p>

<p>Here's the effect as the user zooms in and out:</p>

<p>
  <video width="100%" controls>
    <source src="https://github.com/adammark/adammark.github.com/assets/28193/2bd512a7-70ae-4b7f-8aec-78976c64ef46" type="video/mp4"/>
  </video>
</p>

</section>

<section>
<h3>The code</h3>

<p>First, I created Input and Output types. An input represents a unit of data on the map. An ouput takes the same shape as an input yet also retains a reference to its constituent inputs:</p>

<script src="https://gist.github.com/adammark/61fe48b176bfaf4f9b062a68d08a96ab.js"></script>

<p>Then I created a utility function that accepts an array of inputs, the current scale of the map, and a search radius (a larger radius packs more data). It returns a smaller array of outputs:</p>

<script src="https://gist.github.com/adammark/518f9bd4283491337da4664b05724a89.js"></script>

<p>Finally, with just a few extra lines of presentation code, I could pack hundreds of "pins" together:</p>

<script src="https://gist.github.com/adammark/dbc7011c2f2aad6797e867f08f462883.js"></script>
</section>

<section>
<h3>Conclusion</h3>

<p>The clustering function provided an easy and elegant way to declutter the UI—and the DOM!</p>
</section>

</main>

</body>

</html>
