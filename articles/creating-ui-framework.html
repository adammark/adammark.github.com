<html>

<head>

<title>Adam Mark - Creating a foundational UI framework</title>

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"/>
<meta name="title" content="Adam Mark - Creating a foundational UI framework"/>

<link href="../main.css?1685368683753" rel="stylesheet">

</head>

<body>

<main>

<a href="../">Home</a>

<h1>Creating a foundational UI framework</h1>

<h2>Adam Mark</h2>

<section>
<h3>Background</h3>

<p>From 2015 to 2020, I designed and developed web applications for a medical-grade biometric system.</p>
</section>

<section>
<h3>Problem</h3>

<p>In early 2015, <a href="https://react.dev/" target="_blank">React</a> was emerging as a powerful way to build dynamic, single-page web apps. Yet the React ecosystem was immature: there were few, decent component libraries and no higher-order frameworks like <a href="https://nextjs.org/" target="_blank">Next.js</a>, <a href="https://remix.run/" target="_blank">Remix</a> or <a href="https://vuejs.org/">Vue</a>. Even <a href="https://create-react-app.dev/" target="_blank">Create React App</a> wasn't a thing. <i>I wanted to create a foundational UI framework on top of React.</i></h3>

</section>

<section>
<h3>Solution</h3> 

<p>I created a “core” framework on top of <a href="https://react.dev/" target="_blank">React</a> and <a href="https://redux.js.org/" target="_blank">Redux</a> and organized it into loosely-coupled packages, including:</p>

<ul>
  <li><b>components:</b> Custom-made, general-purpose React components such as buttons, toggles and tabs</li>
  <li><b>ui:</b> Imperative UI controls for displaying modals and alerts</li>
  <li><b>state:</b> Functions for working with state held in <a href="https://redux.js.org/tutorials/essentials/part-1-overview-concepts" target="_blank">stores</a></li>
  <li><b>request:</b> Functions for issuing API requests to our services</li>
  <li><b>cache:</b> Functions for saving data locally</li>
  <li><b>routing:</b> Functions for managing page “routes”</li>
  <li><b>localization:</b> Functions for translating text and formatting dates and numbers</li>
  <li><b>math:</b> Functions and constants for working with our domain data (biometrics)</li>
  <li><b>charts:</b> Reusable charting components made with <a href="https://d3js.org/" target="_blank">D3</a></li>
</ul>

<p>Over five years, I built several, standalone applications on top of this framework, all sharing a common look-and-feel:</p>

<p><img width="100%" src="https://github.com/adammark/adammark.github.com/assets/28193/9f1dafee-c7f6-436e-918b-534917a15e2c"/></p>
<p><img width="100%" src="https://github.com/adammark/adammark.github.com/assets/28193/4d8944e0-03a9-40f7-b1ca-73117873193c"/></p>
<p><img width="100%" src="https://github.com/adammark/adammark.github.com/assets/28193/91b30d09-f561-4f60-afca-aa3d4358aaa8"/></p>
<p><img width="100%" src="https://github.com/adammark/adammark.github.com/assets/28193/5b982df5-c52a-4a87-9fa1-53edf2ab69aa"/></p>

</section>

<section>
<h3>The code</h3>

<p>To make the framework easy to use and maintain, I was careful to <a href="https://en.wikipedia.org/wiki/Facade_pattern" target="_blank">hide implementation details</a> whenever practical. For example, I created a <b>cache</b> package on top of the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API" target="_blank">Web Storage</a> API. This package enhanced the functionality of Web Storage by automatically serializing and deserializing data, and it also provided the flexibility to replace Web Storage with another technology if necessary:</p>

<pre><code class="language-javascript hljs"><span class="hljs-class"><span class="hljs-keyword">const</span> <span class="hljs-title">cache</span> = </span>{
  setItem: <span class="hljs-keyword">function</span> (key, val) {
    <span class="hljs-keyword">try</span> {
      localStorage.setItem(key, <span class="hljs-built_in">JSON</span>.stringify(val));

      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
    <span class="hljs-keyword">catch</span> (e) {
      <span class="hljs-built_in">console</span>.warn(e);
      <span>throw(e);</span>
    }
  },

  getItem: <span class="hljs-keyword">function</span> (key) {
    <span class="hljs-keyword">const</span> val = localStorage.getItem(key);

    <span class="hljs-keyword">if</span> (val !== <span class="hljs-literal">null</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-built_in">JSON</span>.parse(val);
    }

    <span class="hljs-keyword">return</span> <span class="hljs-literal">undefined</span>;
  },

  removeItem: <span class="hljs-keyword">function</span> (key) {
    <span class="hljs-keyword">if</span> (key <span class="hljs-keyword">in</span> localStorage) {
      localStorage.removeItem(key);
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }

    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  },

  clear: <span class="hljs-keyword">function</span> (pattern) {
    <span class="hljs-built_in">Object</span>.keys(localStorage).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">key</span>) </span>{
      <span class="hljs-keyword">if</span> (key.match(pattern)) {
        localStorage.removeItem(key);
      }
    });
  }
}</code></pre>

<p>And I created a <b>localization</b> package with the express purpose of hiding <a href="https://momentjs.com/" target="_blank">Moment.js</a>. Today, I could swap out Moment for the widely-supported <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl" target="_blank">Intl</a> API without changing any application-layer code:</p>

<pre><code class="language-javascript hljs"><span class="hljs-class"><span class="hljs-keyword">const</span> localization = </span>{
  ...

  formatTime: <span class="hljs-keyword">function</span> (date, format = <span class="hljs-string">"medium"</span>) {
    <span class="hljs-keyword">const</span> opts = {
      <span class="hljs-string">"short"</span>:   <span class="hljs-string">"h:mm A"</span>,
      <span class="hljs-string">"medium"</span>:  <span class="hljs-string">"h:mm:ss A"</span>,
      <span class="hljs-string">"long"</span>:    <span class="hljs-string">"h:mm:ss A z"</span>,
      <span class="hljs-string">"precise"</span>: <span class="hljs-string">"h:mm:ss.SSS"</span>
    };

    <span class="hljs-keyword">return</span> moment(date).format(opts[format]);
  },

  formatDateTime: <span class="hljs-keyword">function</span> (date) {
    <span class="hljs-keyword">return</span> moment(date).format(<span class="hljs-string">"l, h:mm:ss A z"</span>);
  },

  ...
}</code></pre>

</section>

<section>
<h3>Conclusion</h3>

<p>My framework gave us exactly what we needed—nothing more, nothing less—to build a suite of fast, beautiful web apps.</p>
</section>

</main>

</body>

</html>
