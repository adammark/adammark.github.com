
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Getting to the promised land of cross-platform, device-independent displays - Adam Mark</title>
  <meta name="author" content="Adam Mark">

  
  <meta name="description" content="I&#8217;ve been leaning heavily on CSS Media Queries and Flexbox to build
App Cloud apps that adapt to both portrait and landscape modes. For
example &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://www.adammark.net/blog/2012/08/24/getting-to-the-promised-land-of-cross-platform/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Adam Mark" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Adam Mark</a></h1>
  
    <h2>Web design and development</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:www.adammark.net" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/work">My Work</a></li>
  <li><a href="/about">About Me</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Getting to the Promised Land of Cross-platform, Device-independent Displays</h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-08-24T15:33:00-04:00" pubdate data-updated="true">Aug 24<span>th</span>, 2012</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>I&#8217;ve been leaning heavily on <a href="http://www.w3.org/TR/css3-mediaqueries/">CSS Media Queries</a> and <a href="http://www.html5rocks.com/en/tutorials/flexbox/quick/">Flexbox</a> to build
<a href="http://appcloud.brightcove.com">App Cloud</a> apps that adapt to both portrait and landscape modes. For
example, I made a video playlist that flows from top to bottom in portrait
mode and left to right in landscape mode:</p>

<p><img src="/images/blog/app-cloud-orientation.jpg" alt="Portrait and landscape orientations" /></p>

<p>I also use CSS to build “universal” apps that adapt intelligently to different
form factors. The properties <code>min-device-width</code> and <code>max-device-width</code> can
help detect whether an app is running on something the size of a phone or
something the size of a tablet. Smashing Magazine has a <a href="http://mobile.smashingmagazine.com/2010/07/19/how-to-use-css3-media-queries-to-create-a-mobile-version-of-your-website/">good tutorial</a> on
this subject.</p>

<p>But CSS alone can&#8217;t get me to the promised land of cross-platform,
device-independent displays. Here&#8217;s where it comes up short:</p>

<ul>
<li><p><strong>CSS can&#8217;t change the behavior of an app.</strong> It can only affect presentation
characteristics. Except for toggling the visiblity of certain page elements or
adjusting their metrics, it&#8217;s nearly impossible to apply device-specific or
orientation-based functionality without the help of JavaScript.</p></li>
<li><p><strong>CSS can&#8217;t resize images.</strong> Yeah, you heard me. CSS can scale down an
image, but it can&#8217;t resize an image. A 250KB image is still 250KB whether you
display it at 100% or 50% of its intrinsic size. To properly scale images for
all kinds of devices, you&#8217;ll need the help of a transcoding service.</p></li>
</ul>


<p>Getting to the promised land—we&#8217;re talking about apps that adapt to portrait
and landscape modes and work across a variety of devices and perform really
well—is easy with App Cloud. Here&#8217;s how.</p>

<h2>Responding to orientation changes</h2>

<p>If you know the current orientation—and if you know when it changes—you can
make intelligent decisions about the user experience. For example, you might
want to load some extra data or transform the UI entirely when the user
switches into landscape mode:</p>

<pre><code>// get the current orientation ("landscape" or "portrait")
var orientation = bc.context.viewOrientation;

// listen for an orientation change
$(bc).on("vieworientationchange", function (evt, result) {
    orientation = result.orientation;

    if (result.orientation === "landscape") {
        // do something!
    }
    else {
        // do something else!
    }
});
</code></pre>

<h2>Distinguishing between phones and tablets</h2>

<p>If you know whether your app is running on a phone or tablet, you can deliver
specific functionality to each form factor from a single codebase. For
example, here&#8217;s a factory method that instantiates one type of BlogView if
running on a phone, another if running on a tablet:</p>

<pre><code>BlogView.factory = function () {
    return getDeviceType() === "phone" ? new PhoneBlogView() : new TabletBlogView();
};
</code></pre>

<p>There are a few ways to determine the device type. A simple method is to look
at the width and height of the window, multiply them together, and evaluate
the result:</p>

<pre><code>function getDeviceType() {
    return innerWidth * innerHeight &lt;= 320 * 480 ? "phone" : "tablet";
}
</code></pre>

<p>Here&#8217;s a similar technique from <a href="http://www.html5rocks.com/en/mobile/cross-device/">HTML5rocks.com</a>:</p>

<pre><code>function getDeviceType() {
    return window.matchMedia("(max-width: 650px)").matches ? "phone" : "tablet";
}
</code></pre>

<p>These methods are great if your definition of a phone is somewhat fast and
loose (some Android phones are as big as tablets). Instead, consider
categorizing your target devices as &#8220;big&#8221; and &#8220;small&#8221;:</p>

<pre><code>function getDeviceType() {
    return window.matchMedia("(max-width: 650px)").matches ? "small" : "big";
}
</code></pre>

<h2>Distinguishing between operating systems</h2>

<p>Sometimes it&#8217;s necessary to know which operating system you&#8217;re running on. App
Cloud makes this easy:</p>

<pre><code>var os = bc.context.os;

if (os === "ios") {
    // do something
} else if (os === "android") {
    // do something else
}
</code></pre>

<p>In the above example, &#8220;doing something&#8221; might mean loading different
stylesheets or disabling a certain feature that isn&#8217;t available on Android.</p>

<h2>Resizing images</h2>

<p>The pièce de résistance of responsive design is being able to resize and crop
images on the fly based on runtime conditions such as screen size and pixel
density. You can do this with App Cloud&#8217;s <a href="http://support.brightcove.com/en/docs/transcoding-images">image transcoding API</a>.</p>

<p><img src="/images/blog/app-cloud-transcode-before-after.jpg" alt="Before and after images" /></p>

<p>It&#8217;s easy to use JavaScript to compose service URLs based on screen metrics or
other layout constraints. Here&#8217;s a simple example:</p>

<pre><code>function transcode(src, width, height) {
    return "http://transcode.appcloud.brightcove.com?image=" + src +
        "&amp;width=" + width + "&amp;height=" + height;
}
</code></pre>

<p>If you want to support retina displays, just double the width and height if
<code>window.devicePixelRatio</code> equals 2:</p>

<pre><code>function transcode(src, width, height) {
    if (window.devicePixelRatio === 2) {
        width *= 2;
        height *= 2;
    }

    return "http://transcode.appcloud.brightcove.com?image=" + src +
        "&amp;width=" + width + "&amp;height=" + height;
}
</code></pre>

<p>Retina images are typically four times as big as normal images (double the
width times double the height), so consider using a multiplier between 1 and 2
to lighten the load a bit while still improving quality.</p>

<p>You can also crop images with the image transcoding API rather than rely on
CSS tricks. Remember, every bit counts in a mobile app. Load only what you
need when you need it.</p>

<h2>Learn more</h2>

<p>You can see all of these techniques at work in the <a href="https://github.com/BrightcoveOS/App-Cloud-Demos">App Cloud Demos</a>
repo on GitHub. The promised land is closer than you think!</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Adam Mark</span></span>

      








  


<time datetime="2012-08-24T15:33:00-04:00" pubdate data-updated="true">Aug 24<span>th</span>, 2012</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/app-cloud/'>App Cloud</a>, <a class='category' href='/blog/categories/css/'>CSS</a>, <a class='category' href='/blog/categories/design/'>Design</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://www.adammark.net/blog/2012/08/24/getting-to-the-promised-land-of-cross-platform/" data-via="" data-counturl="http://www.adammark.net/blog/2012/08/24/getting-to-the-promised-land-of-cross-platform/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2012/08/06/launching-external-apps-in-app-cloud/" title="Previous Post: Launching external apps in App Cloud">&laquo; Launching external apps in App Cloud</a>
      
      
        <a class="basic-alignment right" href="/blog/2012/09/15/app-cloud-and-kinvey-a-one-two-punch-for-content-centric/" title="Next Post: App Cloud and Kinvey: A one-two punch for content-centric, data-driven apps">App Cloud and Kinvey: A one-two punch for content-centric, data-driven apps &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/05/10/introducing-chartlets-tiny-charts-for-tablet-and-mobile-web-apps/">Introducing Chartlets: Tiny charts for tablet and mobile web apps</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/11/16/app-cloud-vs-phonegap/">App Cloud vs. PhoneGap: Which hybrid-native platform is right for you?</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/11/15/opening-a-modal-email-window-in-app-cloud/">Opening a modal email window in App Cloud</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/09/20/monitoring-the-connection-state-in-app-cloud/">Monitoring the connection state in App Cloud</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/09/19/markup-dot-js-custom-pipes-for-your-piping-pleasure/">Markup.js: Custom pipes for your piping pleasure</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/09/15/app-cloud-and-kinvey-a-one-two-punch-for-content-centric/">App Cloud and Kinvey: A one-two punch for content-centric, data-driven apps</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/08/24/getting-to-the-promised-land-of-cross-platform/">Getting to the promised land of cross-platform, device-independent displays</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/08/06/launching-external-apps-in-app-cloud/">Launching external apps in App Cloud</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/08/03/inside-the-app-cloud-workshop/">Inside the App Cloud Workshop: Understanding your apps in development mode</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/08/03/a-font-of-icons-for-your-app-cloud-app/">A font of icons for your App Cloud app</a>
      </li>
    
  </ul>
</section>






  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Adam Mark -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
